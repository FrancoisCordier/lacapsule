<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="stylesheets/style.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Darker+Grotesque&display=swap"
      rel="stylesheet"
    />
    <title>BikeShop - Home</title>
    <script
      src="https://kit.fontawesome.com/a41e9403cf.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <nav class="navbar navbar-light bg-dark">
      <a class="navbar" href="/">
        <img
          src="images/bike-logo.svg"
          width="50"
          height="50"
          class="logo"
          alt=""
        />
        The Bike Shop Experience
      </a>
      <a href="/shop" type="button" class="btn btn-light position-relative me-5">
        <i class="fas fa-shopping-cart"></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
          <% let totalQuantity = 0;
          for (item of dataCartBike) {
            totalQuantity += item.quantity;
          } %>
          <%= totalQuantity %>
        </span>
      </a>
    </nav>
    <div id="picture-header"></div>
    <!-- BIKES SECTION: initializing of the grid here -->
    <div class="container">
      <div class="row row-cols-md-3 row-cols-sm-2 row-cols-1">
      <% for (let i = 0; i < dataBike.length; i++) { %>
        <div class="col">
          <% if (dataBike[i].mea === true) { %>
          <div class="card text-dark bg-warning mb-3">
            <div class="card-header text-center fs-2">Best Buy !</div>
            <img src=<%= dataBike[i].img%> class="card-img-top"
            alt="..." />
            <div class="card-body text-center">
              <h5 class="card-title"><%= dataBike[i].name %></h5>
              <p class="card-text">
                <%= dataBike[i].price %>€ 
                <% if (dataBike[i].stock === 0) { %> 
                  <span class="badge rounded-pill bg-danger">Out of stock</span>
              </p>
              <p><a class="btn btn-dark btn-sm disabled">Add to cart</a></p>
                <% } else { %>
                  <span class="badge rounded-pill bg-success">In stock (<%= dataBike[i].stock %>)</span>
              </p>
                  <p><a href="/buy?model=<%= dataBike[i].name %>" class="btn btn-sm btn-dark">Add to cart</a></p>
                <% } %>
              </p>
            </div>
          </div>
          <% } else {%>
            <div class="card text-dark bg-light mb-3">
              <img src=<%= dataBike[i].img%> class="card-img-top"
              alt="..." />
              <div class="card-body text-center">
                <h5 class="card-title"><%= dataBike[i].name %></h5> 
                <p class="card-text">
                  <%= dataBike[i].price %>€ 
                  <% if (dataBike[i].stock === 0) { %> 
                    <span class="badge rounded-pill bg-danger">Out of stock</span>
                  </p>
                  <a class="btn btn-sm btn-dark disabled">Add to cart</a>
                  <% } else { %>
                    <span class="badge rounded-pill bg-success">In stock (<%= dataBike[i].stock %>)</span>
                  </p>
                  <a href="/buy?model=<%= dataBike[i].name %>" class="btn btn-sm btn-dark">Add to cart</a>
                  <% } %>
              </div>
            </div>
          <% } %>
        </div>
      <% } %>
      </div>
    </div>
    <!-- Scripts ------------------------------------------- -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
